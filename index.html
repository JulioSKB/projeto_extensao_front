<!DOCTYPE html>
<html lang="pt-BR" xml:lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=5"
    />
    <title>Projeto de Extens√£o ‚Äî Escola Solid√°ria</title>

    <meta
      name="description"
      content="Projeto de Extens√£o Escola Solid√°ria ‚Äî Atividades, inscri√ß√µes e informa√ß√µes da institui√ß√£o."
    />
    <meta name="theme-color" content="#38bdf8" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="icon" href="imagens/img-192.png" type="image/png" />

    <!-- Fonte e estilo base -->
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap");

      body {
        font-family: "Gideon Roman", serif;
        background: linear-gradient(180deg, #e0f2fe 0%, #f8fafc 100%);
        color: #1e293b;
        font-size: 1.05rem;
      }

      :focus {
        outline: 3px solid #0ea5e9;
        outline-offset: 2px;
      }

      /* üñºÔ∏è Imagens com legenda ao passar o mouse */
      figure {
        position: relative;
        overflow: hidden;
        border-radius: 12px;
      }

      figure img {
        transition: transform 0.5s ease, filter 0.3s ease;
      }

      figure:hover img {
        transform: scale(1.05);
        filter: brightness(0.9);
      }

      figure::after {
        content: attr(data-legenda);
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(56, 189, 248, 0.8);
        color: white;
        font-size: 0.95rem;
        padding: 6px;
        text-align: center;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      figure:hover::after {
        opacity: 1;
      }
    </style>

    <!-- Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  </head>

  <body class="min-h-screen text-slate-800">
    <a
      href="#conteudo-principal"
      class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-sky-700 text-white px-3 py-2 rounded"
    >
      Ir para o conte√∫do principal
    </a>

    <!-- Cabe√ßalho e Navega√ß√£o -->
    <header class="bg-sky-200 text-sky-900 p-6 shadow-md" role="banner">
      <div class="max-w-5xl mx-auto flex flex-col md:items-start">
        <h1 class="text-3xl font-bold">Escola Solid√°ria</h1>

        <nav aria-label="Navega√ß√£o principal" class="relative mt-4">
          <button
            class="md:hidden inline-flex items-center gap-2 rounded bg-sky-600 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-sky-400 hover:bg-sky-700"
            @click="toggleMenu"
            @keyup="handleMenuKey"
            :aria-expanded="menuAberto.toString()"
            aria-controls="menu-principal"
            aria-label="Abrir menu de navega√ß√£o"
          >
            ‚ò∞ Menu
          </button>
          <ul
            id="menu-principal"
            class="mt-3 md:mt-0 md:flex md:gap-6"
            :class="menuAberto ? 'block' : 'hidden md:flex'"
          >
            <li>
              <a
                href="#galeria"
                class="hover:underline focus:ring-2 focus:ring-sky-400 rounded px-2 py-1"
                >Galeria</a
              >
            </li>
            <li>
              <a
                href="#inicio"
                class="hover:underline focus:ring-2 focus:ring-sky-400 rounded px-2 py-1"
                >In√≠cio</a
              >
            </li>
            <li>
              <a
                href="#sobre"
                class="hover:underline focus:ring-2 focus:ring-sky-400 rounded px-2 py-1"
                >Inscri√ß√£o</a
              >
            </li>
            <li>
              <a
                href="#contato"
                class="hover:underline focus:ring-2 focus:ring-sky-400 rounded px-2 py-1"
                >Inscritos</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Conte√∫do Principal -->
    <main
      id="conteudo-principal"
      class="max-w-5xl mx-auto px-4 pb-24"
      role="main"
      tabindex="-1"
    >
      <!-- Galeria -->
      <section id="galeria" class="mt-8 bg-white rounded-xl shadow p-6">
        <h2 class="text-2xl font-semibold text-sky-700 text-center mb-6">
          Nossa Institui√ß√£o
        </h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
          <figure data-legenda="Crian√ßa lendo livros ‚Äî incentivo √† leitura.">
            <img
              src="imagens/escola1.png"
              alt="Crian√ßa lendo livros na biblioteca"
              class="w-full h-56 object-cover"
            />
          </figure>

          <figure
            data-legenda="Turma participando de atividades educativas e brincadeiras."
          >
            <img
              src="imagens/escola2.png"
              alt="Turma participando de atividades educativas"
              class="w-full h-56 object-cover"
            />
          </figure>

          <figure data-legenda="Oficina de arte e criatividade com crian√ßas.">
            <img
              src="imagens/escola3.png"
              alt="Crian√ßas em oficina de arte"
              class="w-full h-56 object-cover"
            />
          </figure>
        </div>
      </section>

      <!-- Boas-vindas -->
      <section id="inicio" class="bg-white rounded-xl shadow p-6 mt-6">
        <h2 class="text-xl font-semibold">Boas-vindas</h2>
        <p class="mt-2">
          Contador: <strong class="text-sky-700">{{ contador }}</strong>
        </p>
        <p class="mt-2">
          Total de inscritos:
          <span id="total-inscritos">{{ inscritos.length }}</span>
        </p>

        <button
          class="mt-4 inline-flex items-center gap-2 rounded-lg bg-sky-600 px-4 py-2 text-white hover:bg-sky-700 focus:ring-2 focus:ring-sky-400"
          @click="contador++"
        >
          Somar +1
        </button>
      </section>
      
      <!-- Formul√°rio de inscri√ß√£o -->
      <section id="sobre" class="bg-white rounded-xl shadow p-6 mt-6">
        <h2 class="text-2xl font-semibold text-center text-sky-800 mb-4">
          Inscri√ß√£o em Atividade
        </h2>

        <form
          class="flex flex-col items-center gap-4 sm:gap-5"
          @submit.prevent="adicionarInscrito"
        >
          <div
            id="msg-status"
            class="text-red-600 text-center"
            aria-live="assertive"
          ></div>
          <!-- Campo Nome -->
          <div class="w-full max-w-xs sm:max-w-sm md:max-w-md">
            <label
              for="nome"
              class="block font-medium mb-1 text-slate-700 text-center sm:text-left"
            >
              Nome do aluno
            </label>
            <input
              id="nome"
              v-model="form.nome"
              required
              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              placeholder="Digite o nome completo"
            />
          </div>
          <!-- Campo Turma -->
          <div class="w-full max-w-xs sm:max-w-sm md:max-w-md">
            <label
              for="turma"
              class="block font-medium mb-1 text-slate-700 text-center sm:text-left"
            >
              Turma
            </label>
            <input
              id="turma"
              v-model="form.turma"
              required
              class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              placeholder="Exemplo: 2¬∫ ano A"
            />
          </div>
          <div class="text-center w-full mt-3">
            <button
              type="submit"
              class="rounded bg-sky-600 px-5 py-2 text-white hover:bg-sky-700 focus:ring-2 focus:ring-sky-400 transition-colors"
            >
              Inscrever üéâ
            </button>
          </div>
        </form>
      </section>

      <!-- SECTION: Lista de Inscritos -->
      <section id="contato" class="bg-white rounded-xl shadow p-6 mt-6">
        <h2 class="text-2xl font-semibold text-center text-sky-800 mb-4">
          Inscritos
        </h2>

        <div class="flex justify-center">
          <ul class="w-full max-w-md space-y-2" id="lista-inscritos">
            <li
              v-for="(i, idx) in inscritos"
              :key="idx"
              class="flex flex-col sm:flex-row justify-between items-center border-b border-slate-200 pb-2 gap-2"
            >
              <!-- BLOCO DE INFORMA√á√ïES DO ALUNO -->
              <div
                class="flex flex-col w-full sm:flex-row sm:items-center sm:justify-start sm:gap-2 text-center sm:text-left"
              >
                <span
                  class="text-slate-700 font-medium truncate overflow-hidden text-ellipsis whitespace-nowrap max-w-[200px] sm:max-w-[250px]"
                  :title="i.nome"
                >
                  {{ i.nome }}
                </span>
                <span class="hidden sm:inline text-slate-400">‚Äî</span>
                <span
                  class="text-slate-600 text-sm sm:text-base break-words sm:break-normal"
                >
                  {{ i.turma }}
                </span>
              </div>
              <button
                class="rounded bg-sky-100 px-3 py-1 hover:bg-sky-200 focus:ring-2 focus:ring-sky-400 text-sm shrink-0"
                @click="removerInscrito(idx)"
              >
                Remover
              </button>
            </li>
          </ul>
        </div>

        <p
          v-if="inscritos.length === 0"
          class="text-center text-slate-500 mt-6 italic"
        >
          Nenhum aluno inscrito ainda.
        </p>
      </section>

      <div
        id="a11y-status"
        aria-live="polite"
        class="sr-only"
        role="status"
      ></div>
    </main>

    <!-- Rodap√© -->
    <footer class="bg-sky-100 text-slate-700 py-6 mt-10">
      <div class="max-w-5xl mx-auto px-4 text-center text-sm">
        <p>
          <strong>Escola Solid√°ria</strong> ‚Äî Projeto de Extens√£o Front-end ‚Ä¢
          2025
        </p>
        <p class="mt-2">
          Desenvolvido com Vue.js e TailwindCSS ‚Ä¢ Acess√≠vel e Responsivo
        </p>
      </div>
    </footer>

    <!-- Vue.js -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

    <script>
      const { createApp, nextTick } = Vue;
      createApp({
        data() {
          return {
            contador: 0,
            menuAberto: window.innerWidth >= 768,
            form: { nome: "", turma: "" },
            inscritos: [],
          };
        },
        methods: {
          anunciar(texto) {
            const el = document.getElementById("a11y-status");
            if (el) {
              el.textContent = "";
              setTimeout(() => {
                el.textContent = texto;
              }, 100);
            }
          },
          toggleMenu() {
            this.menuAberto = !this.menuAberto;
            this.anunciar(this.menuAberto ? "Menu aberto" : "Menu fechado");
          },
          handleMenuKey(event) {
            if (event.key === "Escape" && this.menuAberto) {
              this.menuAberto = false;
              document
                .querySelector('[aria-label="Abrir menu de navega√ß√£o"]')
                .focus();
            }
          },
          adicionarInscrito() {
            const msg = document.getElementById("msg-status");
            if (!this.form.nome || !this.form.turma) {
              msg.textContent = "Preencha todos os campos obrigat√≥rios.";
              this.anunciar("Erro: campos obrigat√≥rios n√£o preenchidos.");
              return;
            } else msg.textContent = "";

            const novo = {
              nome: this.form.nome.trim(),
              turma: this.form.turma.trim(),
            };
            this.inscritos.push(novo);
            this.form.nome = "";
            this.form.turma = "";

            // Som e Confete
            const audio = new Audio(
              "https://cdn.pixabay.com/audio/2022/03/15/audio_c655dfb68a.mp3"
            );
            audio.play();

            const end = Date.now() + 1500;
            (function frame() {
              confetti({
                particleCount: 6,
                spread: 70,
                origin: { y: 0.6 },
                colors: ["#38bdf8", "#0ea5e9", "#facc15", "#f472b6"],
              });
              if (Date.now() < end) requestAnimationFrame(frame);
            })();

            nextTick(() => {
              document.getElementById("total-inscritos").textContent =
                this.inscritos.length;
            });
          },
          removerInscrito(idx) {
            this.inscritos.splice(idx, 1);
            nextTick(() => {
              document.getElementById("total-inscritos").textContent =
                this.inscritos.length;
            });
          },
        },
      }).mount("#conteudo-principal");
    </script>

    <!-- ‚úÖ Service Worker do PWA -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("./service-worker.js")
            .then(() => console.log("‚úÖ Service Worker registrado com sucesso"))
            .catch((err) => console.error("‚ùå Erro ao registrar SW:", err));
        });
      }
    </script>
  </body>
</html>
